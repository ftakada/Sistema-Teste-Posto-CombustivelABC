unit Sistema.Model.Connection.Factory;

interface

uses
  Sistema.Model.Connection.Interfaces,
  Sistema.Model.Connection.FireDac;

type
  TModelConnectionFactory = class(TInterfacedObject,iModelConnectionFactory)
    private
      FConnection : iModelConnection;
      FFDQuery: iModelQuery;

    public
    constructor Create;
    destructor Destroy; override;
    class function New : iModelConnectionFactory;
    function Connection : iModelConnection;
  end;
implementation

{ TModelConnectionFactory }

function TModelConnectionFactory.Connection: iModelConnection;
begin
  Result := FConnection;
end;

constructor TModelConnectionFactory.Create;
begin
  FConnection := TModelConnectionFireDac.New;
  FConnection.Connect;
end;

destructor TModelConnectionFactory.Destroy;
begin
  inherited;
end;

class function TModelConnectionFactory.New: iModelConnectionFactory;
begin
  Result := Self.Create;
end;

end.
